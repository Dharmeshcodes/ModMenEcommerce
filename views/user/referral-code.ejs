<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>User Referral Code | ModMen</title>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.0/css/all.min.css"/>

    <style>
        body { background: #fafafa; }
        .sidebar-group { width: 320px; min-width: 320px; max-width: 320px; min-height: 680px; margin-top: 40px; display: flex; flex-direction: column; align-items: center; }
        .sidebar-profile-capsule { width: 100%; height: 130px; background: #fff; box-shadow: 0 4px 16px rgba(50,50,50,0.09); border-radius: 32px; padding: 20px 18px; display: flex; align-items: center; border: 1px solid #f0f0f0; }
        .profile-img { width:64px; height:64px; background:#111; border-radius:50%; margin-right:22px; }
        .sidebar-menu-box { width:100%; background:#fff; border-radius:32px; box-shadow:0 4px 16px rgba(40,40,40,0.08); border:1px solid #f0f0f0; padding:24px 0 10px 0; margin-top:-16px; }
        .sidebar-menu-list .list-group-item { font-size:1.13rem; background:transparent; border:0; padding-left:24px; padding-right:24px; margin-bottom:1px; }
        .main-content-section { display:flex; flex-direction:column; align-items:center; justify-content:flex-start; min-height:820px; }
        .main-content-fullname { margin-top:58px; margin-bottom:18px; font-size:2rem; font-weight:500; text-align:center; }
        .main-content-box { width:826px; max-width:98vw; background:#fff; box-shadow:0 6px 32px rgba(45,45,45,0.11); border-radius:38px; border:1px solid #e1e1e1; padding:46px 50px; }
        .ref-text { font-size:1rem; color:#555; text-align:center; max-width:600px; margin:0 auto 20px auto; }
        .ref-box { background:#2c2c2c; color:#fff; padding:18px 26px; border-radius:14px; font-size:1.6rem; letter-spacing:4px; display:flex; justify-content:center; align-items:center; gap:14px; user-select:none; }
        .copy-btn { background:#fff; color:#000; border-radius:8px; padding:6px 10px; font-size:0.9rem; cursor:pointer; border:0; }
        @media(max-width:900px){ .main-content-box { width:100%; padding:38px 25px; } }
    </style>
</head>
<body>

<%- include('../partials/user/header', { user: user }) %>

<div class="container-fluid">
    <div class="row flex-nowrap justify-content-start">

        <div class="col-lg-3 col-md-4 sidebar-group">

            <div class="sidebar-profile-capsule">
                <img src="<%= user.profileImage ? user.profileImage : '/images/default-avatar.png' %>" class="profile-img">
                <span class="fw-semibold fs-5 text-dark"><%= user.fullName %></span>
            </div>

            <div class="sidebar-menu-box">
                <div class="list-group list-group-flush sidebar-menu-list">
                    <a href="/user/profile" class="list-group-item"><i class="bi bi-person me-3"></i> My Profile</a>
                    <a href="/user/address" class="list-group-item"><i class="bi bi-geo-alt me-3"></i> My Address</a>
                    <a href="/user/order" class="list-group-item"><i class="bi bi-bag-check me-3"></i> My Order</a>
                    <a href="/user/wishlist" class="list-group-item"><i class="bi bi-heart me-3"></i> My Wishlist</a>
                    <a href="/user/wallet" class="list-group-item"><i class="bi bi-wallet2 me-3"></i> My Wallet</a>
                    <a href="/user/coupon" class="list-group-item"><i class="bi bi-ticket me-3"></i> My Coupon</a>
                    <a href="/user/change-password" class="list-group-item"><i class="bi bi-key me-3"></i> Change password</a>
                    <a href="/user/logout" class="list-group-item"><i class="bi bi-box-arrow-right me-3"></i> Log out</a>
                    <a href="/user/referral-code" class="list-group-item"><i class="bi bi-stars me-3"></i> Referral Code</a>
                </div>
            </div>
        </div>

        <div class="col-lg-9 col-md-8 main-content-section">

            <div class="main-content-fullname">My Referral Code</div>

            <div class="main-content-box">

                <p class="ref-text">
                    "Invite your friends and earn rewards! Share your unique referral code to get ₹100 credited to your
                    wallet when they join, and your friend receives ₹50 too."
                </p>

                <div class="ref-box">
                    <span id="refCode"><%= user.referralCode %></span>
                    <button class="copy-btn" onclick="copyReferral()">Copy</button>
                </div>

            </div>
        </div>

    </div>
</div>

<%- include('../partials/user/footer') %>

<script>
function copyReferral() {
    const text = document.getElementById("refCode").innerText;
    navigator.clipboard.writeText(text);
    alert("Referral code copied!");
}
</script>

</body>
</html>
